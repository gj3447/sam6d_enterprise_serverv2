# Main_Server ë‹¤ìŒ ì‘ì—… ê°€ì´ë“œ

## í˜„ì¬ ìƒí™© âœ…

- âœ… Main_Server ë¶„ì„ ì™„ë£Œ
- âœ… ëª¨ë“  ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ
- âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì„±ê³µ
- âœ… ë‹¤ë¥¸ ì„œë²„ë“¤(ISM, PEM, Render) ì •ìƒ ì‘ë™ ì¤‘

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ ì˜µì…˜

### ì˜µì…˜ 1: Main_Server ì‹¤í–‰ ë° API í…ŒìŠ¤íŠ¸ (ì¶”ì²œ)

```bash
# Main_Server ì‹¤í–‰
cd Main_Server
uvicorn main:app --host 0.0.0.0 --port 8001 --reload
```

**ì‹¤í–‰ í›„**:
- API ë¬¸ì„œ í™•ì¸: http://localhost:8001/docs
- ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸: `python test_simple.py`

### ì˜µì…˜ 2: ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ í…ŒìŠ¤íŠ¸

ì´ë¯¸ Main_Serverê°€ ì‹¤í–‰ ì¤‘ì´ë¼ë©´:

```bash
# ì „ì²´ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cd Main_Server
python complete_test.py
```

ë˜ëŠ”

```bash
python test_simple.py
```

**í…ŒìŠ¤íŠ¸ ë‚´ìš©**:
1. ì„œë²„ ìƒíƒœ í™•ì¸
2. ê°ì²´ ìƒíƒœ í™•ì¸ (test/obj_000005)
3. ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ (Render â†’ ISM â†’ PEM)

### ì˜µì…˜ 3: APIë¥¼ ì§ì ‘ í˜¸ì¶œí•´ì„œ í…ŒìŠ¤íŠ¸

**ì„œë²„ ìƒíƒœ í™•ì¸**:
```bash
curl http://localhost:8001/api/v1/servers/status
```

**ê°ì²´ ì¡°íšŒ**:
```bash
curl http://localhost:8001/api/v1/objects/classes
curl http://localhost:8001/api/v1/objects/test/obj_000005
```

**ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰**:
```bash
curl -X POST http://localhost:8001/api/v1/workflow/full-pipeline \
  -H "Content-Type: application/json" \
  -d '{
    "class_name": "test",
    "object_name": "obj_000005",
    "input_images": {
      "rgb_path": "static/test/rgb.png",
      "depth_path": "static/test/depth.png",
      "camera_path": "static/test/camera.json"
    }
  }'
```

### ì˜µì…˜ 4: í…œí”Œë¦¿ ìƒì„± ì‘ì—…

`lm` í´ë˜ìŠ¤ì˜ 15ê°œ ê°ì²´ì— í…œí”Œë¦¿ ìƒì„±:

```bash
# Main_Serverê°€ ì‹¤í–‰ ì¤‘ì¼ ë•Œ
curl -X POST http://localhost:8001/api/v1/workflow/render-templates-missing \
  -H "Content-Type: application/json" \
  -d '{
    "class_name": "lm"
  }'
```

**ë˜ëŠ” Pythonìœ¼ë¡œ**:
```python
import requests

response = requests.post(
    "http://localhost:8001/api/v1/workflow/render-templates-missing",
    json={"class_name": "lm"}
)
print(response.json())
```

### ì˜µì…˜ 5: Docker Composeë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰

```bash
# ì „ì²´ ì‹œìŠ¤í…œ í•œë²ˆì— ì‹¤í–‰
docker-compose -f docker-compose.sam6d.yml up -d

# ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.sam6d.yml logs -f
```

## ğŸ’¡ ì¶”ì²œ ìˆœì„œ

### 1ë‹¨ê³„: Main_Server ì‹¤í–‰ (ì§€ê¸ˆ ë°”ë¡œ ê°€ëŠ¥)
```bash
cd Main_Server
uvicorn main:app --host 0.0.0.0 --port 8001 --reload
```

### 2ë‹¨ê³„: API ë¬¸ì„œ í™•ì¸
ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8001/docs ì—´ê¸°

### 3ë‹¨ê³„: ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸
```bash
# ìƒˆ í„°ë¯¸ë„ì—ì„œ
cd Main_Server
python test_simple.py
```

### 4ë‹¨ê³„: ì „ì²´ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸
```bash
python complete_test.py
```

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Main_Server ì‹¤í–‰
- [ ] API ë¬¸ì„œ í™•ì¸ (Swagger UI)
- [ ] ì„œë²„ ìƒíƒœ í™•ì¸ API í…ŒìŠ¤íŠ¸
- [ ] ê°ì²´ ì¡°íšŒ API í…ŒìŠ¤íŠ¸
- [ ] ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
- [ ] ì¶œë ¥ ê²°ê³¼ í™•ì¸

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **í¬íŠ¸ ì¶©ëŒ**: 8001 í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸
2. **ì˜ì¡´ì„±**: ISM, PEM, Render ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•¨
3. **í…ŒìŠ¤íŠ¸ ë°ì´í„°**: `static/test/` í´ë”ì— í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ìˆì–´ì•¼ í•¨

## ğŸ” í˜„ì¬ ìƒíƒœ í™•ì¸

ë‹¤ë¥¸ ì„œë²„ë“¤ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸:

```bash
curl http://localhost:8002/health  # ISM Server
curl http://localhost:8003/api/v1/health  # PEM Server
curl http://localhost:8004/health  # Render Server
```

## ğŸ¯ ë°”ë¡œ ì‹œì‘í•˜ê¸°

ê°€ì¥ ë¹ ë¥´ê²Œ ì‹œì‘í•˜ë ¤ë©´:

```bash
# í„°ë¯¸ë„ 1: Main_Server ì‹¤í–‰
cd Main_Server
uvicorn main:app --host 0.0.0.0 --port 8001 --reload

# í„°ë¯¸ë„ 2: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cd Main_Server
python test_simple.py
```

ì´ì œ ë¬´ì—‡ì„ í• ê¹Œìš”?

