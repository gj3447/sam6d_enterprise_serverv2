========================================
1.   페이지 36 (10월 10일)
========================================

주제: 요구사항 정리와 현재 시스템 파악

수행 내용:
- 실제 운영 중인 Raspberry Pi 브릿지, FastAPI IK 서버, Next.js 디지털 트윈 UI를 기준으로 필요한 기능만 목록화。
- WebSocket 스트림, 추론 API, 로봇 제어 플로우를 단일 데이터 플로우 다이어그램으로 정리。
- 현재 사용 중인 포트, 내부 IP, 환경 변수(NEXT_PUBLIC_* / ROBOT_IK_ENDPOINT 등)를 표로 만들고 공유。

발생 문제:
- 문서화되지 않았던 내부 IP와 포트 정보를 수집하는 데 시간이 소요。

소견:
이미 운영 중인 구성 요소를 실제 흐름대로 정리하니 이후 단계에서 불필요한 가정을 줄일 수 있었다. 동시에 env 파일 정리, 오래된 로그 경로 수정 같은 잡무도 함께 정리했다。

----------------------------------------

========================================
2.   페이지 37 (10월 13일)
========================================

주제: 인프라 구성 확인

수행 내용:
- Raspberry Pi는 RealSense, Modbus 브릿지를 담당하고 FastAPI 서버는 x86 장비에서 동작함을 확인。
- Next.js 프런트엔드는 사내 메인 서버에서 호스팅하며, WebSocket과 REST 호출은 모두 192.168.0.196:53000/53000 대역으로 통일。
- 환경 구분은 운영/개발 2단계만 사용하고, .env 파일로 IP와 포트를 주입하도록 정리。

발생 문제:
- Raspberry Pi ↔ 메인 서버 사이 방화벽 규칙이 일부 막혀 있어 예외 포트를 추가。

소견:
이미 구축된 네트워크를 그대로 쓰되 포트 명세만 명확히 남기는 것으로 충분했다. 방화벽 예외 추가 후 포트 테스트 스크립트도 남겨두어 나중에 재검증이 쉽도록 했다。

----------------------------------------

========================================
3.   페이지 38 (10월 17일)
========================================

주제: 통신 규격 정리

수행 내용:
- WebSocket은 `/ws/transforms_robot`, `/ws/board_perspective_jpg` 등 현재 사용 중인 네 가지 엔드포인트만 문서화。
- FastAPI IK 서버는 `/api/robot/ik`, `/api/robot/ik/downward` 두 가지 요청 구조를 예시 JSON과 함께 기록。
- 추론 API는 `MAIN_SERVER_URL/api/v1/workflow/full-pipeline-from-rss` 호출 파라미터와 응답 구조만 간단히 정리。
- Modbus/OPC UA 관련 내용은 현재 시스템에서 직접 제어하지 않으므로 참고 정도로 표기。

발생 문제:
- 코드 곳곳에 박혀 있던 IP 문자열을 환경 변수로 치환하는 작업이 필요。

소견:
실제로 호출하는 엔드포인트만 남기고 나머지는 문서에서 제외하니 훨씬 읽기 쉬워졌다. 소스 코드의 하드코딩 IP를 전부 env 참조로 치환하고 README 기본 예시도 함께 갱신했다。

----------------------------------------

========================================
4.   페이지 39 (10월 21일)
========================================

주제: 백엔드 구성 확인

수행 내용:
- FastAPI는 pinocchio 기반 IK 계산과 RSS 연동을 맡고 있으며, 프런트엔드는 Next.js API 라우트를 통해 프록시만 수행。
- Raspberry Pi는 RealSense 스트림을 JPEG WebSocket으로 변환하고 DRL Modbus 브릿지를 유지。
- 별도의 캐시나 큐 시스템은 사용하지 않고, FastAPI에서 바로 결과를 반환하도록 구성됨을 재확인。

발생 문제:
- Raspberry Pi에서 pinocchio 빌드가 불가능해 서버에서만 실행되는 구조로 고정。

소견:
현재 사용 중인 최소 구성만 유지하면 복잡도를 높이지 않고도 운영이 가능하다고 판단했다. FastAPI systemd 서비스 상태와 로그 로테이션 설정도 다시 확인해 두었다。

----------------------------------------

========================================
5.   페이지 40 (10월 24일)
========================================

주제: 프런트엔드 구현 정리

수행 내용:
- Next.js App Router + React 19 조합에서 `/robot-dt`, `/robot-path-learning`, `/image-viewer`, `/ycb-browser` 페이지가 동작함을 확인。
- Zustand 스토어는 `robotControlStore`, `transformStore`, `inferenceStore` 세 개만 사용하고, 각각 관절 제어·변환 데이터·추론 결과를 담당。
- WebSocket 연결은 `react-use-websocket`으로 유지하며, 실패 시 1초 간격 자동 재연결 기능만 사용。
- 3D 렌더링은 `react-three-fiber` + `urdf-loader` 조합으로, URDF는 `public/urdf` 경로의 a0509 모델을 그대로 사용。

발생 문제:
- 코드 안에 하드코딩된 WebSocket 호스트를 추상화하는 작업이 필요했음。

소견:
현재 구조를 유지하되 환경 변수 처리만 개선하면 충분한 수준이라고 판단했다. 이 과정에서 React 경고와 콘솔 노이즈를 정리하고, 재연결 토스트 문구도 실제 운영 용어로 맞췄다。

----------------------------------------

========================================
6.   페이지 41 (10월 27일)
========================================

주제: 통합 테스트와 확인 사항

수행 내용:
- 실제 환경에서 “IK 요청 → FastAPI 계산 → 로봇 동작 → WebSocket 피드백” 순서를 반복 테스트。
- `/image-viewer` 페이지에서 4가지 스트림이 모두 표시되는지 확인하고, 재연결 로그를 점검。
- YCB 추론 패널에서 RSS 서버 호출이 정상 동작하는지 실제 데이터로 검증。

발생 문제:
- WebSocket이 끊겼을 때 UI에 즉각 알림이 표시되지 않아 추가 메시지를 넣어야 했음。

소견:
현재 운영 기준에서 필요한 테스트는 대부분 수동 점검으로 해결 가능했다. 테스트 로그는 날짜별로 폴더를 나눠 보관하고, 영상 캡처와 테스트 데이터도 정리해 두었다。

----------------------------------------

========================================
7.   페이지 42 (10월 30일)
========================================

주제: 기능 테스트 완료 및 타 시스템 연동

수행 내용:
- FastAPI IK 서버와 Next.js 프런트가 연결된 상태에서 실제 로봇 제어 시나리오(E2E)를 여러 차례 반복해 정상 동작을 확인。
- RSS 추론 서버, Raspberry Pi 카메라 스트림, DRL Modbus 브릿지를 동시에 붙여 종합 운용 환경에서 교차 테스트。
- 현장 운영팀이 사용하는 모니터링 시트와 알림 봇에 WebSocket/IK 상태를 전달하는 간단한 연동 스크립트를 추가。

소견:
핵심 기능 테스트를 통과하고 기존 설비와 연동까지 마치면서 실서비스 워크플로에 투입 가능한 단계로 넘어갔다. 운영팀 공유 슬랙 채널에 상태 체크 스크립트와 env 템플릿을 올려 마무리했다。

----------------------------------------

